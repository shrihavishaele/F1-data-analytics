<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>F1 API Test - New Endpoints</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #121212;
            color: white;
            padding: 20px;
            max-width: 1200px;
            margin: 0 auto;
        }
        h1 {
            color: #e10600;
            border-bottom: 3px solid #e10600;
            padding-bottom: 10px;
        }
        h2 {
            color: #00d2be;
            margin-top: 30px;
        }
        .endpoint {
            background-color: #1e1e1e;
            border: 1px solid #2a2a2a;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }
        .endpoint-title {
            color: #f58020;
            font-weight: bold;
            font-size: 18px;
            margin-bottom: 10px;
        }
        button {
            background-color: #e10600;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            margin: 5px;
        }
        button:hover {
            background-color: #c10500;
        }
        pre {
            background-color: #0a0a0a;
            border: 1px solid #333;
            border-radius: 5px;
            padding: 15px;
            overflow-x: auto;
            margin-top: 10px;
            font-size: 12px;
        }
        .loading {
            color: #00d2be;
            font-style: italic;
        }
        .error {
            color: #ff5555;
        }
        select, input {
            background-color: #2a2a2a;
            color: white;
            border: 1px solid #444;
            padding: 8px;
            border-radius: 4px;
            margin: 5px;
        }
    </style>
</head>
<body>
    <h1>üèéÔ∏è F1 Dashboard - New API Endpoints Test</h1>
    <p>This page demonstrates all the new endpoints added to your Flask API.</p>

    <h2>üìã Filter Lists (for Dropdowns)</h2>

    <div class="endpoint">
        <div class="endpoint-title">GET /api/drivers_list</div>
        <p>Returns all drivers with their IDs and full names (for dropdown filters)</p>
        <button onclick="testEndpoint('/api/drivers_list', 'drivers-result')">Test Endpoint</button>
        <pre id="drivers-result">Click button to fetch data...</pre>
    </div>

    <div class="endpoint">
        <div class="endpoint-title">GET /api/constructors_list</div>
        <p>Returns all constructors/teams (for dropdown filters)</p>
        <button onclick="testEndpoint('/api/constructors_list', 'constructors-result')">Test Endpoint</button>
        <pre id="constructors-result">Click button to fetch data...</pre>
    </div>

    <div class="endpoint">
        <div class="endpoint-title">GET /api/seasons_list</div>
        <p>Returns all seasons sorted descending (for dropdown filters)</p>
        <button onclick="testEndpoint('/api/seasons_list', 'seasons-result')">Test Endpoint</button>
        <pre id="seasons-result">Click button to fetch data...</pre>
    </div>

    <h2>üë§ Driver Profile</h2>

    <div class="endpoint">
        <div class="endpoint-title">GET /api/driver_profile/&lt;driver_id&gt;</div>
        <p>Complete driver profile with bio, career stats, and championship history</p>
        <label>Select Driver:</label>
        <select id="driver-select">
            <option value="1">Lewis Hamilton (ID: 1)</option>
            <option value="4">Fernando Alonso (ID: 4)</option>
            <option value="20">Sebastian Vettel (ID: 20)</option>
            <option value="830">Max Verstappen (ID: 830)</option>
            <option value="8">Kimi R√§ikk√∂nen (ID: 8)</option>
        </select>
        <button onclick="testDriverProfile()">Get Driver Profile</button>
        <pre id="driver-profile-result">Select a driver and click button...</pre>
    </div>

    <h2>üèÅ Constructor Profile</h2>

    <div class="endpoint">
        <div class="endpoint-title">GET /api/constructor_profile/&lt;constructor_id&gt;</div>
        <p>Complete constructor profile with bio, career stats, and pit stop history</p>
        <label>Select Constructor:</label>
        <select id="constructor-select">
            <option value="1">McLaren (ID: 1)</option>
            <option value="6">Ferrari (ID: 6)</option>
            <option value="131">Mercedes (ID: 131)</option>
            <option value="9">Red Bull (ID: 9)</option>
            <option value="3">Williams (ID: 3)</option>
        </select>
        <button onclick="testConstructorProfile()">Get Constructor Profile</button>
        <pre id="constructor-profile-result">Select a constructor and click button...</pre>
    </div>

    <h2>üìä Existing Dashboard Endpoints (Still Working)</h2>

    <div class="endpoint">
        <div class="endpoint-title">GET /api/kpi</div>
        <p>Dashboard KPI statistics</p>
        <button onclick="testEndpoint('/api/kpi', 'kpi-result')">Test Endpoint</button>
        <pre id="kpi-result">Click button to fetch data...</pre>
    </div>

    <script>
        async function testEndpoint(url, resultId) {
            const resultElement = document.getElementById(resultId);
            resultElement.innerHTML = '<span class="loading">Loading...</span>';
            
            try {
                const response = await fetch(url);
                const data = await response.json();
                
                // Format JSON nicely
                resultElement.textContent = JSON.stringify(data, null, 2);
                
                // Add summary for large arrays
                if (Array.isArray(data) && data.length > 5) {
                    const summary = `Showing first 5 of ${data.length} items:\n\n` + 
                                  JSON.stringify(data.slice(0, 5), null, 2) + 
                                  `\n\n... and ${data.length - 5} more items`;
                    resultElement.textContent = summary;
                }
            } catch (error) {
                resultElement.innerHTML = `<span class="error">Error: ${error.message}</span>`;
            }
        }

        async function testDriverProfile() {
            const driverId = document.getElementById('driver-select').value;
            await testEndpoint(`/api/driver_profile/${driverId}`, 'driver-profile-result');
        }

        async function testConstructorProfile() {
            const constructorId = document.getElementById('constructor-select').value;
            await testEndpoint(`/api/constructor_profile/${constructorId}`, 'constructor-profile-result');
        }
    </script>
</body>
</html>
